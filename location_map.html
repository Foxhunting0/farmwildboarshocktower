<!DOCTYPE html>
<html>
<head>
    <title>멧돼지 퇴치 설비 서비스 지역</title>
    <meta charset="utf-8">
    <style>
        #map1, #map2, #map3 {
            height: 500px; /* 지도의 높이 설정 */
            width: 100%;   /* 지도의 너비 설정 */
            margin-bottom: 20px; /* 지도의 사이 간격 설정 */
        }
        body {
            font-family: Arial, sans-serif;
        }
    </style>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
</head>
<body>
    <h1>멧돼지 출몰 지역</h1>
    <div id="result">Fetching location...</div>
    <div id="map1"></div>
    <div id="map2"></div>
    <div id="map3"></div>

    <script>
        // 페이지 로드 시 자동으로 위치를 가져옴
        window.onload = function() {
            getLocation();
            initializeOtherMaps();
        };

        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(showPosition, showError);
            } else {
                document.getElementById("result").innerHTML = "Geolocation is not supported by this browser.";
            }
        }

        function showPosition(position) {
            var lat = position.coords.latitude;
            var lon = position.coords.longitude;
            document.getElementById("result").innerHTML = "Latitude: " + lat + "<br>Longitude: " + lon;

            // 지도 표시
            var map1 = L.map('map1').setView([lat, lon], 13);

            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            }).addTo(map1);

            // 현재 위치에 마커와 버블 추가
            L.marker([lat, lon]).addTo(map1)
                .bindPopup('wild boar!!')
                .openPopup();

            L.circle([lat, lon], {
                color: 'blue',
                fillColor: '#30f',
                fillOpacity: 0.5,
                radius: 500 // 버블의 반경
            }).addTo(map1)
                .bindPopup('Current Location Area');
        }

        function showError(error) {
            switch(error.code) {
                case error.PERMISSION_DENIED:
                    document.getElementById("result").innerHTML = "User denied the request for Geolocation.";
                    break;
                case error.POSITION_UNAVAILABLE:
                    document.getElementById("result").innerHTML = "Location information is unavailable.";
                    break;
                case error.TIMEOUT:
                    document.getElementById("result").innerHTML = "The request to get user location timed out.";
                    break;
                case error.UNKNOWN_ERROR:
                    document.getElementById("result").innerHTML = "An unknown error occurred.";
                    break;
            }
        }

        function initializeOtherMaps() {
            // 첫 번째 추가 지도
            var map2 = L.map('map2').setView([35.5287329, 129.2901099], 13); // 예시 좌표

            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            }).addTo(map2);

            // 추가 위치에 마커와 버블 추가
            L.marker([35.5287329, 129.2901099]).addTo(map2)
                .bindPopup('대공원 농장');

            L.circle([35.5287329, 129.2901099], {
                color: 'green',
                fillColor: '#0f0',
                fillOpacity: 0.5,
                radius: 500 // 버블의 반경
            }).addTo(map2)
                .bindPopup('대공원 농장 지역');
            
            // 두 번째 추가 지도
            var map3 = L.map('map3').setView([35.5175338, 129.3258761], 13); // 예시 좌표

            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            }).addTo(map3);

            // 추가 위치에 마커와 버블 추가
            L.marker([35.5175338, 129.3258761]).addTo(map3)
                .bindPopup('선함호수 농장');

            L.circle([35.5175338, 129.3258761], {
                color: 'red',
                fillColor: '#f00',
                fillOpacity: 0.5,
                radius: 500 // 버블의 반경
            }).addTo(map3)
                .bindPopup('선함호수 농장 지역');
        }
    </script>
</body>
</html>
